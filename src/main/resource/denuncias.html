<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Blog Dog</title>
    <meta name="author" content="Equipe BlogDog">

    <!--Link CSS-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/b4aa3dd337.js" crossorigin="anonymous"></script>
    <script src="scripts/login.js"></script>
    <script src="scripts/index.js"></script>
    <script src="scripts/meuPerfil.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <link rel="stylesheet" href="style/header_footer.css">
    <link rel="stylesheet" href="style/style_denuncias.css">

    <script>
        // Verifica se o usuário já esta logado e se negativo, redireciona para tela de login        
        if (!usuarioCorrente.login) {
            window.location.href = LOGIN_URL;
        }

        function initPage() {
            // Associa a função de logout ao botão
            document.getElementById('btn_logout').addEventListener('click', logoutUser);
            document.getElementById('btn_perfil').addEventListener('click', Perfil);

        }

        // Associa ao evento de carga da página a função para verificar se o usuário está logado
        window.addEventListener('load', initPage);
    </script>
</head>

<body onload="init(), init2()">
    <!--Cabeçalho-->
    <header class="header">
        <div class="container-fluid">
            <div class="row tester">
                <div class="col-12 header_area">
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-4 col-lg-2 " id="logo-area">
                            <img src="imgs/home/logo.png" class="logo">
                        </div>
                        <div class="col-12 col-sm-12 col-md-8 col-lg-10">
                            <div class="menu-item">
                                <nav class="nav cabecalho">
                                    <input type="checkbox" id="perfil">
                                    <!-- <label for="checkbox" class="logar">
                                    <i class="fas fa-user-circle" id="btn_perfil"></i>
                                    <i class="fas fa-sign-in-alt" id="btn_logout"></i>
                                </label> -->
                                <input type="checkbox" id="menuToggle">
                                <label for="menuToggle" class="menu-icon">
                                    <i class="fa fa-bars"></i>
                                    <i class="fa fa-times-circle"></i>
                                </label>

                                <ul>
                                    <a class="flex-sm-fill text-sm-center nav-link  active" href="home.html">Página
                                        Inicial</a>
                                    <a class="flex-sm-fill text-sm-center nav-link" href="adocao.html">Adoção</a>
                                    <a class="flex-sm-fill text-sm-center nav-link" href="denuncias.html">Abandono</a>
                                    <a class="flex-sm-fill text-sm-center nav-link" href="relatos.html">Agressão</a>
                                    <a class="flex-sm-fill text-sm-center nav-link" href="dicas.html">Dicas</a>
                                    <a class="flex-sm-fill text-sm-center nav-link ongs" href="ongs.html">ONGs
                                        parceiras</a>
                                    <a class="flex-sm-fill text-sm-center nav-link"id="btn_perfil" >Meu perfil</a>
                                    <a class="flex-sm-fill text-sm-center nav-link" id="btn_logout">Sair</a>
                                </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>


    <main class="container main">
        <div class="row">
            <div class="col-12">
                <h1 class="titulo"> Abandono de animais </h1>
                <p class="texto"> Infelizmente, é muito comum nas ruas, cães e gatos abandonados, negligenciados pelos
                    seus donos, tornando o problema algo assola toda a sociedade. <br> <br>

                    Além dos maus tratos a esses animais, o abandono também acarreta em problemas de saúde pública, os
                    animais abandonados estão mais sujeitos a causar problemas nas ruas, terem comportamentos mais
                    agressivos e sobretudo, a transmitir e contaminar outros animais e humanos com doenças como raiva,
                    leptospirose, sarna, dentre outras. <br> <br>

                    Dentre as principais causas do abandono de animais estão a mudança de residência, ninhadas
                    inesperadas, fatores econômicos, comportamento inadequado e falta de tempo para cuidar.

                    Vale lembrar que o abandono de animais é crime e está previsto no artigo 32 da lei 9.605/98. A pena
                    é de três meses a um ano de detenção e multa. Se houver a morte do animal a pena é aumentada em um
                    sexto a um terço. Apesar disso, pode-se afirmar que na maioria das vezes quem pratica esse crime
                    acaba impune, pelo abandono de animais ser um crime silencioso e de difícil fiscalização. <br>
                </p>
                <p class="texto">Para minimizar o máximo possível o problema o site permite que voce denuncie uma
                    situação de abandono de animal ou relate que resgatou-o e necessita de algum tipo de auxílio de
                    nossas organizações.</p>
            
                <h1 class="titulo"> Denunciar </h1>

                <form id="form-contato">
                    <div class="form-group row">
                        <div class="col-sm-4">
                            <label for="inputId">ID</label>
                            <input type="text" class="form-control" id="inputId" placeholder="ID" disabled>
                        </div>

                    </div>
                    <div class="form-group row">

                        <div class="col-sm-8">
                            <label for="inputNome">Nome (*)</label>
                            <input type="text" class="form-control" id="inputNome" required
                                placeholder="Informe seu nome CORRETAMENTE E COMPLETO">
                        </div>
                        <div class="col-sm-4">
                            <label for="inputTelefone">Telefone (*)</label>
                            <input type="text" class="form-control" id="inputTelefone" required
                                placeholder="Ex.: (00) 00000-0000">
                        </div>
                    </div>
                    <div class="form-group row">

                        <div class="col-sm-8">
                            <label for="inputEmail">E-mail (*)</label>
                            <input type="email" class="form-control" id="inputEmail" required
                                placeholder="name@example.com">
                        </div>
                        <div class="col-sm-4">
                            <label for="inputCidade">Cidade</label>
                            <input type="text" class="form-control" id="inputCidade"
                                placeholder="Informe a sua cidade ">
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-6">
                            <label for="inputEspecie">Selecione a espécie do animal</label>
                            <select type="text" class="form-control" id="inputEspecie">
                                <option>Gato</option>
                                <option>Cachorro</option>
                                <option>Outro tipo de animal</option>

                            </select>
                        </div>
                        <div class="col-sm-6">
                            <label for="inputCategoria">Selecione o tipo de denúncia</label>
                            <select type="text" class="form-control" id="inputCategoria">
                                <option>Abandono</option>
                                <option>Agressão</option>

                            </select>
                        </div>

                    </div>

                    <div class="form-group row">
                        <div class="col-sm-12">
                            <label for="inputSite">Informações complementares</label>
                            <input type="text" class="form-control" id="inputSite">
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-4">
                            <small>(*) Campos obrigatórios</small>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-12">
                            <input type="button" class="btn btn-success" id="btnInsert" value="Inserir denúncia">
                            <input type="button" class="btn btn-warning" id="btnUpdate" value="Alterar denúncia">
                            <input type="button" class="btn btn-danger" id="btnDelete" value="Excluir denúncia">

                        </div>
                    </div>
                </form>
                <div class="row">
                    <div class="col-sm-12">
                        <table id="grid-contatos" class="table table-striped">
                            <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Nome</th>
                                    <th scope="col">Telefone</th>
                                    <th scope="col">E-mail</th>
                                    <th scope="col">Cidade</th>
                                    <th scope="col">Espécie do animal</th>
                                    <th scope="col">Tipo de denúncia</th>
                                    <th scope="col">Informações complementares</th>
                                </tr>
                            </thead>
                            <tbody id="table-contatos">
                                <tr>
                                    <td scope="row">1</td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <h1 class="titulo"> Relatar </h1>
                <form id="form-relato">
                    <div class="form-group row">
                        <div class="col-sm-4">
                            <label for="inputId2">ID</label>
                            <input type="text" class="form-control" id="inputId2" placeholder="ID" disabled>
                        </div>

                    </div>
                    <div class="form-group row">

                        <div class="col-sm-8">
                            <label for="inputNome2">Nome (*)</label>
                            <input type="text" class="form-control" id="inputNome2" required
                                placeholder="Informe seu nome CORRETAMENTE e COMPLETO">
                        </div>
                        <div class="col-sm-4">
                            <label for="inputTelefone2">Telefone (*)</label>
                            <input type="text" class="form-control" id="inputTelefone2" required
                                placeholder="Ex.: (00) 00000-0000">
                        </div>
                    </div>
                    <div class="form-group row">

                        <div class="col-sm-8">
                            <label for="inputEmail2">E-mail (*)</label>
                            <input type="email" class="form-control" id="inputEmail2" required
                                placeholder="name@example.com">
                        </div>
                        <div class="col-sm-4">
                            <label for="inputCidade">Cidade</label>
                            <input type="text" class="form-control" id="inputCidade2"
                                placeholder="Informe a sua cidade ">
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-6">
                            <label for="inputEspecie2">Selecione a espécie do animal</label>
                            <select type="text" class="form-control" id="inputEspecie2">
                                <option>Gato</option>
                                <option>Cachorro</option>
                                <option>Outro tipo de animal</option>

                            </select>
                        </div>
                        <div class="col-sm-6">
                            <label for="inputCategoria2">Selecione que ação foi tomada</label>
                            <select type="text" class="form-control" id="inputCategoria2">
                                <option>Animal foi resgatado</option>
                                <option>Nada foi feito</option>

                            </select>
                        </div>


                    </div>

                    <div class="form-group row">
                        <div class="col-sm-6">
                            <label for="inputAjuda">De que forma podemos ajudar?</label>
                            <select type="text" class="form-control" id="inputAjuda">
                                <option>Auxílio médico</option>
                                <option>Auxílio alimentar</option>
                                <option>Resgatar o animal</option>
                                <option>Nenhum auxílio</option>

                            </select>
                        </div>
                        <div class="col-sm-6">
                            <label for="inputSite2">Informações complementares</label>
                            <input type="text" class="form-control" id="inputSite2">
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-4">
                            <small>(*) Campos obrigatórios</small>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-12">
                            <input type="button" class="btn btn-success" id="btnInsert2" value="Inserir relato">
                            <input type="button" class="btn btn-warning" id="btnUpdate2" value="Alterar relato">
                            <input type="button" class="btn btn-danger" id="btnDelete2" value="Excluir relato">


                        </div>
                    </div>
                </form>
                <div class="row">
                    <div class="col-sm-12">
                        <table id="grid-relatos" class="table table-striped">
                            <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Nome</th>
                                    <th scope="col">Telefone</th>
                                    <th scope="col">E-mail</th>
                                    <th scope="col">Cidade</th>
                                    <th scope="col">Espécie do animal</th>
                                    <th scope="col">Ação tomada</th>
                                    <th scope="col">Ajuda necessária</th>
                                    <th scope="col">Informações complementares</th>
                                </tr>
                            </thead>
                            <tbody id="table-relatos">
                                <tr>
                                    <td scope="row">1</td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
            <script src="scripts/app.js"></script>
            <script>
                function exibeContatos() {
                    // Remove todas as linhas do corpo da tabela
                    $("#table-contatos").html("");

                    // Popula a tabela com os registros do banco de dados
                    if (usuarioCorrente.login == 'admin') {
                        for (i = 0; i < dbd.data.length; i++) {
                            let contato = dbd.data[i];
                            $("#table-contatos").append(`<tr><td scope="row">${contato.id}</td>
                                                    <td>${contato.nome}</td>
                                                    <td>${contato.telefone}</td>
                                                    <td>${contato.email}</td>
                                                    <td>${contato.cidade}</td>
                                                    <td>${contato.especie}</td>
                                                    <td>${contato.categoria}</td>
                                                    <td>${contato.info}</td>
                                                </tr>`);
                        }

                    } else {

                        for (i = 4; i < dbd.data.length; i++) {
                            let contato = dbd.data[i];
                            if (usuarioCorrente.nome == contato.nome) {
                                $("#table-contatos").append(`<tr><td scope="row">${contato.id}</td>
                                                    <td>${contato.nome}</td>
                                                    <td>${contato.telefone}</td>
                                                    <td>${contato.email}</td>
                                                    <td>${contato.cidade}</td>
                                                    <td>${contato.especie}</td>
                                                    <td>${contato.categoria}</td>
                                                    <td>${contato.info}</td>
                                                </tr>`);
                            }
                        }

                        {


                        }

                    }

                }

                function init() {
                    // Adiciona funções para tratar os eventos 
                    $("#btnInsert").click(function () {
                        // Verfica se o formulário está preenchido corretamente
                        if (!$('#form-contato')[0].checkValidity()) {
                            displayMessage("Preencha o formulário corretamente.");
                            return;
                        }

                        // Obtem os valores dos campos do formulário
                        let campoNome = $("#inputNome").val();
                        let campoTelefone = $("#inputTelefone").val();
                        let campoEmail = $('#inputEmail').val();
                        let campoCidade = $("#inputCidade").val();
                        let campoEspecie = $('#inputEspecie').val();
                        let campoCategoria = $('#inputCategoria').val();
                        let campoAjuda = $('#inputAjuda').val();
                        let campoInfo = $('#inputSite').val();
                        let contato = {
                            nome: campoNome,
                            telefone: campoTelefone,
                            email: campoEmail,
                            cidade: campoCidade,
                            especie: campoEspecie,
                            categoria: campoCategoria,
                            ajuda: campoAjuda,
                            info: campoInfo
                        };

                        insertContato(contato);

                        // Reexibe os contatos
                        exibeContatos();

                        // Limpa o formulario
                        $("#form-contato")[0].reset();
                    });

                    // Intercepta o click do botão Alterar
                    $("#btnUpdate").click(function () {
                        // Obtem os valores dos campos do formulário
                        let campoId = $("#inputId").val();
                        if (campoId == "") {
                            displayMessage("Selecione um contato para ser alterado.");
                            return;
                        }
                        let campoNome = $("#inputNome").val();
                        let campoTelefone = $("#inputTelefone").val();
                        let campoEmail = $("#inputEmail").val();
                        let campoCidade = $("#inputCidade").val();
                        let campoEspecie = $("#inputEspecie").val();
                        let campoCategoria = $("#inputCategoria").val();
                        let campoInfo = $('#inputSite').val();
                        let contato = {
                            nome: campoNome,
                            telefone: campoTelefone,
                            email: campoEmail,
                            cidade: campoCidade,
                            especie: campoEspecie,
                            categoria: campoCategoria,
                            info: campoInfo
                        };

                        updateContato(parseInt(campoId), contato);

                        // Reexibe os contatos
                        exibeContatos();

                        // Limpa o formulario
                        $("#form-contato")[0].reset();
                    });

                    // Intercepta o click do botão Excluir
                    $("#btnDelete").click(function () {
                        let campoId = $("#inputId").val();
                        if (campoId == "") {
                            displayMessage("Selecione um contato a ser excluído.");
                            return;
                        }
                        deleteContato(parseInt(campoId));

                        // Reexibe os contatos
                        exibeContatos();

                        // Limpa o formulario
                        $("#form-contato")[0].reset();
                    });

                    // Intercepta o click do botão Listar Contatos
                    $("#btnClear").click(function () {
                        $("#form-contato")[0].reset();
                    });

                    // Oculta a mensagem de aviso após alguns segundos
                    $('#msg').bind("DOMSubtreeModified", function () {
                        window.setTimeout(function () {
                            $(".alert").fadeTo(500, 0).slideUp(500, function () {
                                $(this).remove();
                            });
                        }, 5000);
                    });

                    // Preenche o formulário quando o usuario clicar em uma linha da tabela 
                    $("#grid-contatos").on("click", "tr", function (e) {
                        let linhaContato = this;
                        colunas = linhaContato.querySelectorAll("td");

                        $("#inputId").val(colunas[0].innerText);
                        $("#inputNome").val(colunas[1].innerText);
                        $("#inputTelefone").val(colunas[2].innerText);
                        $("#inputEmail").val(colunas[3].innerText);
                        $("#inputCidade").val(colunas[4].innerText);
                        $("#inputEspecie").val(colunas[5].innerText);
                        $("#inputCategoria").val(colunas[5].innerText);
                        $("#inputSite").val(colunas[6].innerText);
                    });

                    exibeContatos();
                }
            </script>

            <script>
                function exibeRelatos() {
                    // Remove todas as linhas do corpo da tabela
                    $("#table-relatos").html("");

                    // Popula a tabela com os registros do banco de dados
                    if (usuarioCorrente.login == 'admin') {
                        for (i = 0; i < dbr.data.length; i++) {
                            let relato = dbr.data[i];
                            $("#table-relatos").append(`<tr><td scope="row">${relato.id}</td>
                                        <td>${relato.nome}</td>
                                        <td>${relato.telefone}</td>
                                        <td>${relato.email}</td>
                                        <td>${relato.cidade}</td>
                                        <td>${relato.especie}</td>
                                        <td>${relato.acao}</td>
                                        <td>${relato.ajuda}</td>
                                        <td>${relato.info}</td>
                                    </tr>`);
                        }

                    } else {

                        for (i = 1; i < dbr.data.length; i++) {
                            let relato = dbr.data[i];
                            if (usuarioCorrente.nome == relato.nome) {
                                $("#table-relatos").append(`<tr><td scope="row">${relato.id}</td>
                                        <td>${relato.nome}</td>
                                        <td>${relato.telefone}</td>
                                        <td>${relato.email}</td>
                                        <td>${relato.cidade}</td>
                                        <td>${relato.especie}</td>
                                        <td>${relato.acao}</td>
                                        <td>${relato.ajuda}</td>
                                        <td>${relato.info}</td>
                                    </tr>`);
                            }
                        }

                        {


                        }

                    }

                }

                function init2() {
                    // Adiciona funções para tratar os eventos 
                    $("#btnInsert2").click(function () {
                        // Verfica se o formulário está preenchido corretamente
                        if (!$('#form-relato')[0].checkValidity()) {
                            displayMessage("Preencha o formulário corretamente.");
                            return;
                        }

                        // Obtem os valores dos campos do formulário
                        let campoNome = $("#inputNome2").val();
                        let campoTelefone = $("#inputTelefone2").val();
                        let campoEmail = $('#inputEmail2').val();
                        let campoCidade = $("#inputCidade2").val();
                        let campoEspecie = $('#inputEspecie2').val();
                        let campoAcao = $('#inputCategoria2').val();
                        let campoAjuda = $('#inputAjuda').val();
                        let campoInfo = $('#inputSite2').val();
                        let relato = {
                            nome: campoNome,
                            telefone: campoTelefone,
                            email: campoEmail,
                            cidade: campoCidade,
                            especie: campoEspecie,
                            acao: campoAcao,
                            ajuda: campoAjuda,
                            info: campoInfo
                        };

                        insertRelato(relato);

                        // Reexibe os relatos
                        exibeRelatos();

                        // Limpa o formulario
                        $("#form-relato")[0].reset();
                    });

                    // Intercepta o click do botão Alterar
                    $("#btnUpdate2").click(function () {
                        // Obtem os valores dos campos do formulário
                        let campoId = $("#inputId").val();
                        if (campoId == "") {
                            displayMessage("Selecione um relato para ser alterado.");
                            return;
                        }
                        let campoNome = $("#inputNome2").val();
                        let campoTelefone = $("#inputTelefone2").val();
                        let campoEmail = $("#inputEmail2").val();
                        let campoCidade = $("#inputCidade2").val();
                        let campoEspecie = $("#inputEspecie2").val();
                        let campoAcao = $("#inputCategoria2").val();
                        let campoInfo = $('#inputSite2').val();
                        let relato = {
                            nome: campoNome,
                            telefone: campoTelefone,
                            email: campoEmail,
                            cidade: campoCidade,
                            especie: campoEspecie,
                            acao: campoAcao,
                            ajuda: campoAjuda,
                            info: campoInfo
                        };

                        updateRelato(parseInt(campoId), relato);

                        // Reexibe os relatos
                        exibeRelatos();

                        // Limpa o formulario
                        $("#form-relato")[0].reset();
                    });

                    // Intercepta o click do botão Excluir
                    $("#btnDelete2").click(function () {
                        let campoId = $("#inputId").val();
                        if (campoId == "") {
                            displayMessage("Selecione um relato a ser excluído.");
                            return;
                        }
                        deleteRelato(parseInt(campoId));

                        // Reexibe os relatos
                        exibeRelatos();

                        // Limpa o formulario
                        $("#form-relato")[0].reset();
                    });

                    // Intercepta o click do botão Listar relatos
                    $("#btnClear").click(function () {
                        $("#form-relato")[0].reset();
                    });

                    // Oculta a mensagem de aviso após alguns segundos
                    $('#msg').bind("DOMSubtreeModified", function () {
                        window.setTimeout(function () {
                            $(".alert").fadeTo(500, 0).slideUp(500, function () {
                                $(this).remove();
                            });
                        }, 5000);
                    });

                    // Preenche o formulário quando o usuario clicar em uma linha da tabela 
                    $("#grid-relatos").on("click", "tr", function (e) {
                        let linharelato = this;
                        colunas = linharelato.querySelectorAll("td");

                        $("#inputId").val(colunas[0].innerText);
                        $("#inputNome2").val(colunas[1].innerText);
                        $("#inputTelefone2").val(colunas[2].innerText);
                        $("#inputEmail2").val(colunas[3].innerText);
                        $("#inputCidade2").val(colunas[4].innerText);
                        $("#inputEspecie2").val(colunas[5].innerText);
                        $("#inputCategoria2").val(colunas[5].innerText);
                        $("#inputAjuda").val(colunas[5].innerText);
                        $("#inputSite2").val(colunas[6].innerText);
                    });

                    exibeRelatos();
                }
            </script>
        </div>
        </div>

    </main>
    <script src="https://unpkg.com/blip-chat-widget" type="text/javascript">
    </script>
    <script>
        (function () {
            window.onload = function () {
                new BlipChat()
                .withAppKey('cGVkcm8yODo5NjgxZjNkMS1hZWU3LTQxNTctOTk5OC0yMjcxNmFmYTgzNjY=')
                .withButton({"color":"#2CC3D5","icon":""})
                .withCustomCommonUrl('https://chat.blip.ai/')
                .build();
            }
        })();
    </script>

    <!--Rodapé-->
    <footer class="footer">
        <div class="container-fluid">
            <div class="row">

                <div class="col-12 footer_area">
                    <p>BlogDog - Todos os direitos reservados - 2020</p>
                </div>

            </div>
        </div>
    </footer>

</body>

</html>